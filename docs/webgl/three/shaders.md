# 着色器

着色器是一个用`GLSL `编写的程序，它被发送到 GPU。用于定位几何图形的每个顶点，并对该几何图形的每个可见像素着色。术语`像素`是不准确的，因为渲染中的每个点不一定匹配屏幕的每个像素，这就是为什么我们更喜欢使用术语`片元`。

我们向着色器发送大量的数据，比如`顶点坐标`、`网格变换`、`相机`及其的信息、`颜色`、`纹理`、`灯光`、`雾`等参数。GPU 然后按照着色器指令处理所有这些数据，我们的几何图形出现在渲染中。

## 顶点着色器

顶点着色器的作用是定位几何图形的顶点。向其发送：

- 顶点坐标
- 网格变换（位置、旋转和比例）
- 相机信息（位置、旋转和视野）

GPU 处理这些信息，将顶点投射到一个 2D 空间。

其接收的数据有两种类型：

- `attribute`（属性）每个顶点之间发生变化，例如顶点坐标。所以这个只能在顶点着色器中使用
- `uniform` 在顶点之间不变的数据。

其还可定义一种类型，可往片元着色器发送数据

- `varing`

顶点着色器是首先触发的，放置完了顶点，可以进入片元着色器。

## 片元着色器

片元着色器的作用是为几何图形的每个可见片元着色。

相同的片元着色器将用于每个可见的几何片元。

其接收的数据类型有两种：

- `uniform`
- `varing` 从顶点着色器往片元着色器发送数据

## RawShaderMaterial 中的 顶点着色器

- `modelMatrix` 应用相对于`Mesh`（position,rotation,scale）的转换。
- `viewMatrix` 应用相对于相机（position,rotation,near,fat）的转换。
- `projectionMatrix` 将坐标转为`裁剪空间坐标`
